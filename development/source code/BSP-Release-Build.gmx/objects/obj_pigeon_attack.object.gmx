<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_pigeon_stand</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_kenetic_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
zgrav = 0.05;
zbouncable = 0;
spr_shadow = spr_pigeon_shadow;
zspeed = 0;
ztarget = 0;
move_speed = 2.5;
speed_random = .5+irandom(5)/10;
dir_random = 0;

interact = "";
action = 0;
alarm[0] = floor(random(60))+60;

ix = x;
iy = y;

pidgeon_num = instance_number(obj_pigeon_attack)*40+irandom(20);
pigeon_dis = 12+irandom(16);
x = x+lengthdir_x(pigeon_dis,pidgeon_num);
y = y+lengthdir_x(pigeon_dis,pidgeon_num);

spawn_x = x;
spawn_y = y;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
zbouncable = 0;

target = -1;
if instance_exists(g.target_bread){
target = g.target_bread;}

alarm[1] -= 1;
alarm[0] -= 1;
if alarm[0] &lt;= 0{
action = 0;
spawn = 0;}

if interact = ""{
spr_action = 0;

if action = 0{

//bark reaction
if scr_pug_dis(32) {
if pug.sprite_index = pug.spr_bark{
sprite_index = spr_pigeon_coo;
image_speed = .25;
alarm[0] = floor(sprite_get_number(spr_pigeon_coo)/image_speed);
scr_sound(snd_pigeon_coo,g.sfx_volume);
action = 1;
speed = 0;}}


//bite reaction
if scr_pug_dis(8){ 
if pug.sprite_index = pug.spr_bite
|| pug.sprite_index = pug.spr_bite_low{
pug.sprite_index = pug.spr_bite_low;
if pug.pug_action = 1{
pug.pug_action_proc = 1;



}}}


//walk / stand
if action = 0{
if speed &gt; 0{
sprite_index = spr_pigeon_walk;
image_speed = .25;}
else{
sprite_index = spr_pigeon_stand;
image_single = 0;
image_speed = 0;}}


if distance_to_point(spawn_x,spawn_y) &gt; 32{
direction = point_direction(x,y,spawn_x,spawn_y);}

}


//move around randomly
if action = 0 &amp;&amp; alarm[1] &lt;= 0 &amp;&amp; alarm[0] &lt;= 0{
alarm[1] = 60 + floor(random(60));
i = random(100);
if i &gt; 70{
alarm[0] = 30 + floor(random(30));
speed = 1;
if !place_free(x+lengthdir_x(2,direction),y+lengthdir_y(2,direction)){
speed = 0;
alarm[0] = 15;}

direction = random(359);
if distance_to_point(spawn_x,spawn_y) &gt; 32{
direction = point_direction(x,y,spawn_x,spawn_y);}}
else{speed = 0;}

if i &lt; 40{
action = 1;
sprite_index = spr_pigeon_eat;
image_speed = .25;
alarm[0] = floor(sprite_get_number(sprite_index)/image_speed);}

if i &gt;= 40 &amp;&amp; i &lt; 50{
action = 1;
sprite_index = spr_pigeon_coo;
image_speed = .25;
alarm[0] = floor(sprite_get_number(sprite_index)/image_speed);
scr_sound(snd_pigeon_coo,g.sfx_volume);}
}

}//end if no interact
/////////////////////////////////////////////////////////




if target &gt; 0{

//bread on ground
if target.object_index = obj_bread{
if interact = "fly"{interact = "land";}
spawn_x = target.x+lengthdir_x(pigeon_dis,pidgeon_num);
spawn_y = target.y+lengthdir_x(pigeon_dis,pidgeon_num);

if !place_free(spawn_x,spawn_y){
if pigeon_dis &gt; 4{pigeon_dis -= 1;}}

}

//pug with bread
else{
if scr_dis(target.x,target.y,x,y) &lt; 164{
if interact = ""{interact = "fly";}}
}


if interact = "fly"{
//take off
if sprite_index != spr_pigeon_takeoff &amp;&amp;
sprite_index != spr_pigeon_fly{
sprite_index = spr_pigeon_takeoff;
image_index = 0;
image_speed = .15;}
if sprite_index = spr_pigeon_takeoff{
if floor(image_index) = image_number-1{
sprite_index = spr_pigeon_fly;
image_speed = .25;
fly_turn = 15+irandom(15);
zspeed = 2;
ztarget = 32;
}}
//fly and move.
if sprite_index = spr_pigeon_fly{
if fly_turn &lt;= 0{
fly_turn = 30+irandom(20);
direction = point_direction(x,y,target.x,target.y)-45+irandom(90);
if direction &gt; point_direction(x,y,target.x,target.y){
dir_random = irandom(10)/10;}else{dir_random = 0-irandom(10)/10;}
speed = move_speed;
hspeed += target.hspeed;
vspeed += target.vspeed;

speed_random = .5+irandom(5)/10;
fly_turn -= 30*speed_random;
ztarget = 8+irandom(24);
}else{fly_turn -= 1;}


direction += dir_random;

if speed &lt; move_speed*speed_random{speed += .1;}
if speed &gt; move_speed*speed_random{speed -= .1;}
image_speed = (.25/move_speed)*speed;
if z &lt; ztarget{z += 1;}
if z &gt; ztarget{z -= 1;}

if distance_to_object(target) &lt; 2 &amp;&amp; z &lt;= 10{
with target{
if hurt = 0 &amp;&amp; sprite_index != spr_stung{
hurt = 2;}}}



if scr_pug_dis(80) {
if pug.sprite_index = pug.spr_bark{
if pug.pug_action = 1{
z += 2;
ztarget = 24+irandom(8);
direction = point_direction(x,y,target.x,target.y)-45+irandom(90)+180;
speed_random = .5;
speed = move_speed*speed_random;
fly_turn = 60+irandom(30);
}}}


}//end fly
}//end fly and takeoff


}//end target


if interact = "land"{
idis = scr_dis(x,y,spawn_x,spawn_y);
direction = point_direction(x,y,spawn_x,spawn_y);
speed = clamp(move_speed*(128/idis),.5,2);
if z &gt; 0{z -= (z/idis)*speed;}else{z = 0;}

if idis &lt;= 2{
z = 0; speed = 0; 
interact = "";
action = 0;
alarm[0] = floor(irandom(10))+15;}}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
//draw_sprite_ext(sprite_index,image_single,x,y-z-14,1,1,rot,color,alpha);

//draw_text(g.vx+10,g.vy+20+10*inst_number,interact);



</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
